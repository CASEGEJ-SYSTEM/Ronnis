<div class="container mx-auto max-w-6xl bg-black/20 backdrop-blur-sm p-8 rounded-xl shadow-xl">
    <div class="flex justify-end mb-4">
    </div>
    <div class="overflow-x-auto">
        <table class="w-full text-left text-sm whitespace-nowrap">
            <thead>
                <tr class="border-b border-white/20">
                    <th class="p-3">Clave</th>
                    <th class="p-3">Nombre Completo</th>
                    <th class="p-3">Vencimiento</th>
                    <th class="p-3 text-center">Acciones</th>
                </tr>
            </thead>
            <tbody>
                @for (user of usersData; track user.id) {
                <tr class="border-b border-white/10 hover:bg-white/5">
                    <td class="p-3">{{ user.key }}</td>
                    <td class="p-3">
                        <a [routerLink]="['/admin/usuarios', user.id, 'estadisticas']"
                            class="hover:text-pink-400 hover:underline">
                            {{ user.name }}
                        </a>
                    </td>
                    <td class="p-3" [ngClass]="user.status === 'Vigente' ? 'text-green-400' : 'text-red-400'">{{
                        user.status }}</td>
                    <td class="p-3">
                        <div class="flex justify-center space-x-2">
                            <button (click)="showQrModal(user)" class="action-btn" title="QR">
                                <i class="ph ph-qr-code"></i>
                            </button>
                            <a [routerLink]="['/admin/usuarios', user.id, 'editar']" class="action-btn" title="Editar">
                                <i class="ph ph-pencil-simple-line"></i>
                            </a>
                            <button (click)="deleteUser(user)" class="action-btn text-red-500" title="Eliminar">
                                <i class="ph ph-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@if (selectedUserForQr()) {
<app-qr-code-modal [user]="selectedUserForQr()" (close)="closeQrModal()"></app-qr-code-modal>
}